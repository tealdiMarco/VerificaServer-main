{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Marco/Downloads/VerificaServer-main/VerificaServer-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpHeaders } from \"@angular/common/http\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./connection.service\";\nexport class WebserviceService {\n  constructor(connectionService) {\n    this.connectionService = connectionService;\n    this.headers = new HttpHeaders();\n    this.esamiOk = false;\n  }\n  getPeople(endPoint) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield new Promise((resolve, reject) => {\n        _this.headers = new HttpHeaders({\n          'Content-Type': 'application/json; charset=utf-8',\n          token: localStorage.getItem(\"token\") || \"\"\n        });\n        _this.connectionService.sendGetRequest(endPoint, {\n          headers: _this.headers\n        }).subscribe(data => {\n          console.log(\"In service: data from DB studenti OK\");\n          resolve(_this.peopleData = data.data);\n          localStorage.setItem(\"token\", data.token);\n          console.log(data.data);\n        }, error => {\n          console.log(\"Errore get People\");\n          console.log(error);\n          reject();\n        });\n      });\n    })();\n  }\n  getExams(endPoint, idPerson) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield new Promise((resolve, reject) => {\n        _this2.headers = new HttpHeaders({\n          'Content-Type': 'application/json; charset=utf-8'\n        });\n        _this2.connectionService.sendPostRequest(endPoint, {\n          id: idPerson\n        }, {\n          headers: _this2.headers\n        }).subscribe(data => {\n          console.log(\"In service: esami singolo utente OK\");\n          if (data.data.length > 0) _this2.esamiOk = true;else _this2.esamiOk = false;\n          resolve(_this2.datiEsami = data.data);\n        }, error => {\n          console.log(\"Errore get Esami\");\n          console.log(error);\n          reject();\n        });\n      });\n    })();\n  }\n  login(endPoint, u, p) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      yield new Promise((resolve, reject) => {\n        _this3.headers = new HttpHeaders({\n          'Content-Type': 'application/json; charset=utf-8'\n        });\n        _this3.connectionService.sendPostRequest(endPoint, {\n          username: u,\n          password: p\n        }, {\n          headers: _this3.headers\n        }).subscribe(data => {\n          console.log(data.token);\n          localStorage.setItem(\"token\", data.token);\n          resolve(_this3.loginResponse = data.msg);\n        }, error => {\n          console.log(\"Errore di Login...\");\n          console.log(error);\n          reject();\n        });\n      });\n    })();\n  }\n  static #_ = this.ɵfac = function WebserviceService_Factory(t) {\n    return new (t || WebserviceService)(i0.ɵɵinject(i1.ConnectionService));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: WebserviceService,\n    factory: WebserviceService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["HttpHeaders","WebserviceService","constructor","connectionService","headers","esamiOk","getPeople","endPoint","_this","_asyncToGenerator","Promise","resolve","reject","token","localStorage","getItem","sendGetRequest","subscribe","data","console","log","peopleData","setItem","error","getExams","idPerson","_this2","sendPostRequest","id","length","datiEsami","login","u","p","_this3","username","password","loginResponse","msg","_","i0","ɵɵinject","i1","ConnectionService","_2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Marco\\Downloads\\VerificaServer-main\\VerificaServer-main\\src\\app\\service\\webservice.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {HttpHeaders} from \"@angular/common/http\";\nimport {ConnectionService} from \"./connection.service\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WebserviceService {\n  headers = new HttpHeaders();\n  peopleData:any;\n  datiEsami:any;\n  esamiOk:boolean = false;\n  loginResponse: any;\n\n  constructor(private connectionService: ConnectionService) { }\n\n  async getPeople(endPoint:string): Promise<any>{\n    await new Promise((resolve,reject)=>{\n      this.headers = new HttpHeaders({'Content-Type':'application/json; charset=utf-8', token:localStorage.getItem(\"token\") || \"\"});\n      this.connectionService.sendGetRequest(endPoint,{headers:this.headers}).subscribe(\n        (data:any)=>{\n          console.log(\"In service: data from DB studenti OK\");\n          resolve(this.peopleData=data.data);\n          localStorage.setItem(\"token\",data.token);\n          console.log(data.data);\n        },\n        (error:any)=>{\n          console.log(\"Errore get People\");\n          console.log(error);\n          reject();\n        }\n      );\n    });\n  }\n\n\n  async getExams(endPoint: string, idPerson: any): Promise<any>{\n    await new Promise((resolve,reject)=>{\n      this.headers = new HttpHeaders({'Content-Type':'application/json; charset=utf-8'});\n      this.connectionService.sendPostRequest(endPoint,{id:idPerson},{headers: this.headers}).subscribe(\n        (data:any)=>{\n          console.log(\"In service: esami singolo utente OK\");\n          if(data.data.length > 0)\n            this.esamiOk = true;\n          else\n            this.esamiOk = false;\n          resolve(this.datiEsami=data.data);\n        },\n        (error:any)=>{\n          console.log(\"Errore get Esami\");\n          console.log(error);\n          reject();\n        }\n      );\n    });\n  }\n\n  async login(endPoint:string,u:string,p:string): Promise<any> {\n    await new Promise((resolve, reject) => {\n      this.headers = new HttpHeaders({'Content-Type': 'application/json; charset=utf-8'});\n      this.connectionService.sendPostRequest(endPoint, {username: u, password: p}, {headers: this.headers}).subscribe(\n        (data: any) => {\n          console.log(data.token);\n          localStorage.setItem(\"token\",data.token);\n          resolve(this.loginResponse=data.msg);\n        },\n        (error: any) => {\n          console.log(\"Errore di Login...\");\n          console.log(error);\n          reject();\n        });\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}